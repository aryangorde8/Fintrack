{% extends 'base.html' %}
{% block content %}
<h2>Financial Report</h2>

<div class="card section fade-up">
    <h3>ðŸ“Š Summary</h3>
    <p><strong>Total Income:</strong> â‚¹{{ summary.totalIncome|floatformat:2 }}</p>
    <p><strong>Total Expenses:</strong> â‚¹{{ summary.totalExpenses|floatformat:2 }}</p>
    <p><strong>Net Amount:</strong> â‚¹{{ summary.netAmount|floatformat:2 }}</p>
</div>

<h3>ðŸ“ˆ Budget Analysis</h3>
<div class="card section fade-up">
  {% if budget_analysis %}
  <table>
      <tr>
          <th>Category</th>
          <th>Limit</th>
          <th>Spent</th>
          <th>Remaining</th>
          <th>Utilization</th>
      </tr>
      {% for budget in budget_analysis %}
      <tr>
          <td>{{ budget.category }}</td>
          <td>â‚¹{{ budget.limit_amount|floatformat:2 }}</td>
          <td>â‚¹{{ budget.spent_amount|floatformat:2 }}</td>
          <td>â‚¹{{ budget.remaining|floatformat:2 }}</td>
          <td>{{ budget.utilization_pct }}%</td>
      </tr>
      {% endfor %}
  </table>
  {% else %}
    <p class="muted empty-state">Add budgets and transactions to generate an analysis.</p>
  {% endif %}
  </div>

<div class="section fade-up">
    <a href="/api/web/download/csv/" class="btn success">Download CSV</a>
    <a href="/api/web/download/pdf/" class="btn danger" style="margin-left:10px;">Download PDF</a>
</div>
{% endblock %}
