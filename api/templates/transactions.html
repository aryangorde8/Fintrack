{% extends 'base.html' %}
{% block content %}
<h2>Transactions</h2>

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{% if 'warning' in message.tags %}warning{% else %}success{% endif %} fade-up">{{ message }}</div>
  {% endfor %}
{% endif %}

<form method="POST" class="section card fade-up">
    {% csrf_token %}
    <label>Type</label>
    <select name="type" required>
        <option value="expense">Expense</option>
        <option value="income">Income</option>
    </select>
    
    <label>Amount (₹)</label>
    <input type="number" step="0.01" name="amount" required>
    
    <label>Category</label>
    <input type="text" name="category" required>
    
    <label>Description</label>
    <textarea name="description" rows="3"></textarea>
    
    <label>Phone Number (for SMS alerts, optional)</label>
    <input type="tel" name="phone_number" placeholder="+919890534664">
    
    <label>Email (for email alerts, optional)</label>
    <input type="email" name="email" placeholder="aryangorde8@gmail.com">
    
    <div class="spacer-1"></div>
    <button class="btn" type="submit">Add Transaction</button>
  </form>

<h3>Recent Transactions</h3>
<div class="card section fade-up">
  <table>
      <tr>
          <th>Date</th>
          <th>Type</th>
          <th>Category</th>
          <th>Amount</th>
          <th>Description</th>
      </tr>
      {% for tx in transactions %}
      <tr>
          <td>{{ tx.date|date:"Y-m-d H:i" }}</td>
          <td>{{ tx.type|upper }}</td>
          <td>{{ tx.category }}</td>
          <td>₹{{ tx.amount }}</td>
          <td>{{ tx.description }}</td>
      </tr>
      {% endfor %}
  </table>
  </div>
{% endblock %}
